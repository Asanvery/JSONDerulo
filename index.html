<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Jsonderulo by pdincubus</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Jsonderulo</h1>
        <h2>JSON feed getter-er</h2>
        <a href="https://github.com/pdincubus/JSONDerulo" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>JSONDerulo - A JSON feed fetcher for MODX Revolution CMS</h1>

<p>Snippets and chunks to pull in various social JSON feeds.
Results are cached for 12 hours by default, but you can specify your own time limit in seconds using &amp;cacheTime=``. Make sure you call the snippet uncached from your templates!
Most snippets allow you to specify multiple usernames, however any feeds which require an API key will not yet work with multiple accounts.
The following feeds are already set up:</p>

<ul>
<li>App.net - most recent posts</li>
<li>Delicious - most recent bookmarks</li>
<li>Flickr - most recent photographs in your photostream</li>
<li>LastFM - recent "loved" tracks or recent "listens"</li>
<li>Picasa - Photos from a named album</li>
<li>Twitter - most recent tweets</li>
<li>Vimeo - most recent "likes"</li>
<li>YouTube - Most recent additions to "favourites" playlist or specific user's uploads</li>
<li>ZooTool - Most recent items (pages or images)</li>
</ul><h2>Thanks!</h2>

<p>Plenty of thouroughly helpful help from <a href="https://github.com/johnnoel">Mister John Noel</a> and his code on which these snippets are based.</p>

<h2>Requirements/Prerequisites</h2>

<ul>
<li>Tested on MODx 2.2.x</li>
<li>PHPThumbOf</li>
<li>API Keys for certain feeds</li>
<li>That's it!</li>
</ul><h2>Still to do</h2>

<p><del>Having added option to include retweets in the Twitter feed, probably needs some work on placeholders available specific to retweets.</del>
Done. See placeholders further down...</p>

<h2>Available snippets</h2>

<h3>App.net</h3>

<p>You need your user id to get this working, not your username. You can find it on your profile page. <a href="https://alpha.app.net/man/post/20858">Hat tip to "man"</a>.</p>

<pre><code>&lt;ul&gt;
  [[!AppDotNetFeed? &amp;tpl=`AppDotNetFeedItem` &amp;userId=`USERID` &amp;limit=`LIMIT` &amp;cacheTime=`CACHE_TIME_IN_SECONDS`]]
&lt;/ul&gt;
</code></pre>

<h3>Delicious</h3>

<pre><code>&lt;ul&gt;
  [[!DeliciousFeed? &amp;tpl=`DeliciousFeedItem` &amp;users=`USERNAME` &amp;limit=`LIMIT` &amp;cacheTime=`CACHE_TIME_IN_SECONDS`]]
&lt;/ul&gt;
</code></pre>

<h3>Flickr</h3>

<p>Requires API key, get one here: <a href="http://www.flickr.com/services/apps/create/apply">Flickr API Key</a></p>

<pre><code>&lt;ul&gt;
    [[!FlickrFeed? &amp;tpl=`FlickrFeedItem` &amp;limit=`LIMIT` &amp;users=`FLICKR USER ID` &amp;apiKey=`API KEY` &amp;userName=`USERNAME` &amp;cacheTime=`CACHE_TIME_IN_SECONDS`]]
&lt;/ul&gt;
</code></pre>

<h3>LastFM</h3>

<p>Requires api key, get one here: <a href="http://www.last.fm/api/account">LastFM API Key</a></p>

<pre><code>&lt;ul&gt;
    [[!LastFmFeed? &amp;tpl=`LastFmFeedItem` &amp;limit=`LIMIT` &amp;users=`USERNAME` &amp;apiKey=`API KEY` &amp;cacheTime=`CACHE_TIME_IN_SECONDS`]]
&lt;/ul&gt;
</code></pre>

<pre><code>&lt;ul&gt;
    [[!LastFmListensFeed? &amp;tpl=`LastFmFeedItem` &amp;limit=`LIMIT` &amp;users=`USERNAME` &amp;apiKey=`API KEY` &amp;cacheTime=`CACHE_TIME_IN_SECONDS`]]
&lt;/ul&gt;
</code></pre>

<h3>Picasa</h3>

<pre><code>&lt;ul&gt;
    [[!PicasaFeed? &amp;tpl=`PicasaFeedItem` &amp;limit=`LIMIT` &amp;users=`USERID` &amp;albumId=`ALBUMID` &amp;albumName=`ALBUMNAME` &amp;cacheTime=`CACHE_TIME_IN_SECONDS`]]
&lt;/ul&gt;
</code></pre>

<h3>Twitter</h3>

<pre><code>&lt;ul&gt;
    [[!TwitterFeed? &amp;tpl=`TwitterFeedItem` &amp;limit=`LIMIT` &amp;users=`USERNAME` &amp;includeRTs=`1 or 0` &amp;cacheTime=`CACHE_TIME_IN_SECONDS`]]
&lt;/ul&gt;
</code></pre>

<h3>Twitter (New API version)</h3>

<p>You need to set up a Twitter "App" to make this work. From March 2013, this is the ONLY way. The method above will stop working altogether by this date. See more information in the Twitter section below!</p>

<p>The cacheName option is for users who may want to use the snippet more than once on a site for different users' tweets. Setting this appends the text to the cache filename so multiple feeds can be cached. I've added a string replacement to swap spaces for hyphens in there too.</p>

<p>The screenName option is <em>optional</em>. It will allow you to fetch another user's timeline. If this is not provided, it will default to the user whose consumer key, etc, that you are using.</p>

<pre><code>&lt;ul&gt;
    [[!TwitterFeedNew? &amp;tpl=`TwitterFeedItem` &amp;limit=`LIMIT` &amp;cacheName=`UNIQUE_NAME_TO_APPEND_TO_CACHE_FILE` &amp;screenName=`USER_SCREEN_NAME_TO_FETCH_TIMELINE_FOR` &amp;includeRTs=`1 or 0` &amp;consumerKey=`YOUR_CONSUMER_KEY` &amp;consumerSecret=`YOUR_CONSUMER_SECRET` &amp;accessToken=`YOUR_ACCESS_TOKEN` &amp;accessTokenSecret=`YOUR_ACCESS_TOKEN_SECRET` &amp;cacheTime=`CACHE_TIME_IN_SECONDS`]]
&lt;/ul&gt;
</code></pre>

<h3>Vimeo</h3>

<pre><code>&lt;ul&gt;
    [[!VimeoFeed? &amp;tpl=`VimeoFeedItem` &amp;users=`USERNAME` &amp;limit=`LIMIT` &amp;cacheTime=`CACHE_TIME_IN_SECONDS`]]
&lt;/ul&gt;
</code></pre>

<h3>YouTube</h3>

<pre><code>&lt;ul&gt;
    [[!YouTubeFeed? &amp;tpl=`YouTubeFeedItem` &amp;limit=`LIMIT` &amp;users=`USERNAME` &amp;cacheTime=`CACHE_TIME_IN_SECONDS`]]
&lt;/ul&gt;
</code></pre>

<pre><code>&lt;ul&gt;
    [[!YouTubeFeedUploads? &amp;tpl=`YouTubeFeedItem` &amp;limit=`LIMIT` &amp;users=`USERNAME` &amp;cacheTime=`CACHE_TIME_IN_SECONDS`]]
&lt;/ul&gt;
</code></pre>

<h3>ZooTool</h3>

<p>Requires API key, get one here: <a href="http://zootool.com/api/keys">ZooTool API Key</a></p>

<pre><code>&lt;ul&gt;
    [[!ZooToolFeed? &amp;tpl=`ZooToolFeedItem` &amp;limit=`LIMIT` &amp;users=`USERNAME` &amp;apiKey=`API KEY` &amp;cacheTime=`CACHE_TIME_IN_SECONDS`]]
&lt;/ul&gt;
</code></pre>

<h2>Chunks</h2>

<p>I've provided basic chunks to get you started. Any feed which returns thumbnails/imagery I've used PHPThumbOf, if you use these chunks make sure you have it installed too!</p>

<p>You can also use the MODx's output filters to provide fallback should the feed you request be empty. E.g. - such as a new twitter account with no tweets yet:</p>

<pre><code>[[!TwitterFeed:default=`&lt;li&gt;No tweets&lt;/li&gt;`? &amp;tpl=`TwitterFeedItem` &amp;limit=`10` &amp;users=`USERNAME`]]
</code></pre>

<p>The basic Twitter chunk also shows you how to use the isRetweet option to switch out your details for the author of the tweet you retweeted. The example isn't the best, but it'll give you the right idea, and will also allow you to integrate a retweet icon if you wish.</p>

<h3>Chunk placeholders</h3>

<p>Currently only the basics have placeholders provided. The YouTube feed, for example, has more options that you may ever need. If I find I ever use them, I will add them in.</p>

<h4>App.net:</h4>

<p>The App.net feed is very pleasant and gives you the option of either "text" or "html" versions of a post. I've included placeholders for both. The basic chunk I've provided only uses [[+text]].</p>

<p>[[+id]]
[[+text]]
[[+html]]
[[+created]]
[[+picture]]
[[+title]]
[[+username]]
[[+profile]]
[[+postUrl]]</p>

<h4>Delicious:</h4>

<pre><code>[[+title]]
[[+description]]
[[+link]]
[[+date]]
[[+username]]
</code></pre>

<h4>Flickr:</h4>

<pre><code>[[+id]]
[[+created]]
[[+picture]]
[[+picturelarge]]
[[+title]]
[[+username]]
</code></pre>

<h4>LastFM:</h4>

<pre><code>[[+track]]
[[+artist]]
[[+link]]
[[+picture]]
[[+date]]
[[+username]]
</code></pre>

<h3>Picasa:</h3>

<pre><code>[[+link]]
[[+albumid]]
[[+created]]
[[+picture]]
[[+title]]
[[+userid]]
[[+albumname]]
</code></pre>

<h4>Twitter:</h4>

<pre><code>[[+id]]
[[+message]]
[[+created]]
[[+picture]]
[[+title]]
[[+username]]
[[+retweetCount]]
[[+isRetweet]]
[[+originalAuthorPicture]]
[[+originalAuthor]]
[[+originalUsername]]
[[+originalId]]
</code></pre>

<h4>Vimeo:</h4>

<pre><code>[[+id]]
[[+url]]
[[+created]]
[[+picture]]
[[+title]]
[[+username]]
</code></pre>

<h4>YouTube:</h4>

<pre><code>[[+published]]
[[+picture]]
[[+title]]
[[+ytlink]]
[[+embedlink]]
[[+author]]
</code></pre>

<h4>ZooTool:</h4>

<pre><code>[[+date]]
[[+picture]]
[[+title]]
[[+username]]
[[+referrer]]
[[+permalink]]
</code></pre>

<h3>CSS</h3>

<p>I've used the clearfix from the <a href="http://www.html5boilerplate.com">HTML5 Boilerplate normalize.css</a> on <code>&lt;li&gt;</code> items to clear floats inside them:</p>

<div class="highlight"><pre><span class="nc">.cf</span><span class="nd">:before</span><span class="o">,</span> <span class="nc">.cf</span><span class="nd">:after</span> <span class="p">{</span> <span class="k">content</span><span class="o">:</span> <span class="s2">""</span><span class="p">;</span> <span class="k">display</span><span class="o">:</span> <span class="n">table</span><span class="p">;</span> <span class="p">}</span>
<span class="nc">.cf</span><span class="nd">:after</span> <span class="p">{</span> <span class="k">clear</span><span class="o">:</span> <span class="k">both</span><span class="p">;</span> <span class="p">}</span>
<span class="nc">.cf</span> <span class="p">{</span> <span class="o">*</span><span class="n">zoom</span><span class="o">:</span> <span class="m">1</span><span class="p">;</span> <span class="p">}</span>
</pre></div>

<h3>PHPThumbOf settings</h3>

<p>Ensure you have the following in the "phpthumb_nohotlink_valid_domains" section:</p>

<ul>
<li>Flickr: <code>*.flickr.com, *.staticflickr.com</code>
</li>
<li>ZooTool: <code>s3.amazonaws.com</code>
</li>
<li>YouTube Thumbnails: <code>.ytimg.com</code>
</li>
<li>LastFM Album art: <code>userserve-ak.last.fm</code>
</li>
<li>Vimeo Thumbnails: <code>*.vimeocdn.com</code>
</li>
<li>Twitter profile avatars: <code>*.twimg.com</code>
</li>
<li>Picasa Thumbnails: <code>*.googleusercontent.com</code>
</li>
<li>App.net avatars: <code>*.cloudfront.net</code>
</li>
</ul><h2>Twitter feed and the new API</h2>

<p>Much publicised changes to the Twitter API means that you have to authenticate to get public feed data now. I will keep the original, easy way to get a Twitter feed until the date they switch this off, but you're probably best going through the pain of getting onto the new API stuff now.</p>

<p>This uses the excellent (and thoroughly easy to use) <a href="https://github.com/abraham/twitteroauth/">TwitterOAuth</a> by <a href="https://github.com/abraham">Abraham Williams</a> (check out his incredible beard!). If you're adding the JSONDerulo snippets and chunks manually, you're going to need to upload a copy of the TwitterOAuth stuff to {core_path}/components/jsonderulo/</p>

<p>The transport package will do this automatically for you. (Hopefully).</p>

<p>To set up a Twitter "App", go to the <a href="https://dev.twitter.com/apps/">Twitter dev site</a> and choose "Create a new application". Fill in the form and you'll end up with a new "app" which will let you know the consumer secret, consumer key, access token, and access token secret.</p>

<p>Hat tip also to <a href="http://www.qodo.co.uk/blog/twitterx-a-new-modx-extra-for-pulling-in-twitter-feeds-using-api-1.1/">Stewart Orr</a>, whose TwitterX addon reminded me to get my backside in gear and fix this package up!</p>

<h2>Twitter display "requirements"</h2>

<p>I've included a new chunk for displaying tweets. This includes several changes which <em>should</em> make the output acceptable based on the <a href="https://dev.twitter.com/terms/display-requirements">Developer display requirements documentation</a>. You will need to include the Twitter widgets.js somewhere on the page you're displaying tweets on. You only need this included ONCE on the page, not for each tweet.</p>

<pre><code>&lt;script type="text/javascript" src="//platform.twitter.com/widgets.js"&gt;&lt;/script&gt;
</code></pre>

<p>Also, hat tip to <a href="https://github.com/basvaneijk">basvaneijk</a> for the preg_replace stuff to auto link @, # and URLs within the [[+message]]</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/pdincubus/JSONDerulo/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/pdincubus/JSONDerulo/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/pdincubus/JSONDerulo"></a> is maintained by <a href="https://github.com/pdincubus">pdincubus</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>